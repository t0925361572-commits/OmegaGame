<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>æ­ç±³ä¼½è¨“ç·´éŠæˆ²</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;background:#f6f8fa;color:#222;margin:0;padding:20px;text-align:center}
  .container{max-width:760px;margin:0 auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.06)}
  h1{margin:0 0 8px;font-size:20px}
  p.lead{margin:6px 0 18px;color:#555}
  #questionBox{min-height:100px;border-radius:8px;background:#fafafa;padding:16px;margin-bottom:12px;border:1px solid #eee;text-align:left}
  #qmeta{font-size:13px;color:#666;margin-bottom:8px}
  #qtext{font-size:18px;line-height:1.4}
  .controls{display:flex;gap:8px;justify-content:center;margin-top:12px;flex-wrap:wrap}
  input[type="text"]{padding:10px;border-radius:6px;border:1px solid #ccc;font-size:16px;width:160px;text-transform:uppercase;text-align:center}
  button{background:#007bff;color:#fff;border:none;padding:10px 14px;border-radius:6px;cursor:pointer;font-size:15px}
  button.secondary{background:#6c757d}
  #score{font-size:18px;color:#007bff;margin-top:10px}
  #progress{width:100%;height:12px;background:#e9ecef;border-radius:10px;margin-top:8px;overflow:hidden}
  #progressBar{height:100%;width:0%;transition:width .3s;background:#28a745}
  #feedback{margin-top:8px;min-height:28px}
  .ok{color:green}
  .bad{color:red}
  footer{margin-top:18px;font-size:13px;color:#666}
  @media(max-width:520px){input[type="text"]{width:120px}}
</style>
</head>
<body>
<div class="container">
  <h1>æ­ç±³ä¼½è¨“ç·´éŠæˆ²</h1>
  <p class="lead">ä¿ç•™ã€Œè¼¸å…¥ A / Bã€ç­”é¡Œæ–¹å¼ â€¢ æ¯è¼ª 5 é¡Œ â€¢ é¡Œåº« 60 é¡Œ â€¢ åŒä¸€é¡Œåœ¨é¡Œåº«è€—ç›¡å‰ä¸æœƒé‡è¤‡å‡ºç¾</p>

  <div id="questionBox">
    <div id="qmeta">ç¬¬ <span id="qIndex">-</span> é¡Œï¼ˆæœ¬è¼ª <span id="roundProgress">0</span>/5ï¼‰</div>
    <div id="qtext">æŒ‰ã€Œé–‹å§‹ã€æŠ½é¡Œ</div>
  </div>

  <div class="controls">
    <input id="answerInput" type="text" maxlength="3" placeholder="è¼¸å…¥ A æˆ– B" />
    <button id="submitBtn">æäº¤ç­”æ¡ˆ</button>
    <button id="startBtn">é–‹å§‹ / æ›äº”é¡Œ</button>
    <button id="reportBtn" class="secondary">ä¸‹è¼‰éŒ¯é¡Œå ±å‘Š</button>
  </div>

  <div id="score">æœ¬è¼ªåˆ†æ•¸ï¼š<span id="scoreVal">0</span>/5</div>
  <div id="progress"><div id="progressBar"></div></div>
  <div id="feedback"></div>

  <footer>
    <div>ç¸½è¼ªæ¬¡ï¼š<span id="totalRounds">0</span> â€¢ é¡Œåº«å‰©é¤˜ï¼š<span id="remain">60</span></div>
  </footer>
</div>

<script>
/*
 V8: å…¨åŸŸé¡Œåº«ä¸é‡è¤‡ï¼ˆA/B è¼¸å…¥ï¼‰
  - å…¨é¡Œåº«ä¸€æ¬¡æ´—ç‰Œ (shuffleAllQuestions)
  - ä½¿ç”¨ pointer æŒ‡å‘ä¸‹ä¸€é¡Œ (poolPointer)ï¼Œå–å‡º 5 é¡Œç‚ºä¸€çµ„
  - ç•¶ pool ç”¨ç›¡ï¼Œæœƒè‡ªå‹•é‡æ–°æ´—ç‰Œä¸¦å¾é ­é–‹å§‹
  - ç­”é¡Œæ–¹å¼ä¿ç•™è¼¸å…¥ A æˆ– Bï¼ˆä¸å€åˆ†å¤§å°å¯«ï¼‰
  - éŒ¯é¡ŒåŠ å…¥ wrongLogï¼ˆå¯ä¸‹è¼‰ï¼‰
*/

// ------------- é¡Œåº«ï¼ˆ60 é¡Œï¼‰ -------------
const allQuestions = [
  // series / branding
  {q:'å“ªå€‹ç³»åˆ—ä»¥ç™»æœˆæ•…äº‹èåï¼ŸA. æµ·é¦¬ B. è¶…éœ¸', a:'B'},
  {q:'æ½›æ°´æ€§èƒ½æœ€å¼·çš„ç³»åˆ—æ˜¯å“ªå€‹ï¼ŸA. è¶…éœ¸ B. æµ·é¦¬', a:'B'},
  {q:'æ˜Ÿåº§ç³»åˆ—çš„æ¨™èªŒæ€§è¨­è¨ˆæ˜¯ï¼ŸA. æ‰˜çˆª B. æ’æ°¦é–¥é–€', a:'A'},
  {q:'è¶é£›ç³»åˆ—ä¸»è¦è¨´æ±‚æ˜¯ï¼ŸA. æ­£è£å„ªé›… B. é‹å‹•è€ç”¨', a:'A'},
  {q:'Aqua Terra å±¬æ–¼å“ªå€‹ä¸»è¦ç³»åˆ—ï¼ŸA. è¶…éœ¸ B. æµ·é¦¬', a:'B'},
  {q:'å“ªå€‹ç³»åˆ—ç¶“å¸¸ç”¨æ–¼è¨ˆæ™‚è³½è»Šé¢¨æ ¼ï¼ŸA. è¶…éœ¸ B. æ˜Ÿåº§', a:'A'},

  // caliber / æ©ŸèŠ¯
  {q:'METAS èªè­‰å¸¸è¦‹æ–¼å“ªé¡é«˜éšæ©ŸèŠ¯ï¼ŸA. å¤©æ–‡å°èªè­‰ B. Master Chronometer', a:'B'},
  {q:'8900 æ©ŸèŠ¯å¸¸è¦‹æ–¼å“ªå€‹ç³»åˆ—ï¼ŸA. æ˜Ÿåº§/Globemaster B. è¶…éœ¸', a:'A'},
  {q:'æŸäº›æµ·é¦¬æ¬¾å¼æ¡ç”¨ 8800 æ©ŸèŠ¯ï¼Œå„²èƒ½å¤§ç´„æ˜¯ï¼ŸA. ~55 å°æ™‚ B. ~72 å°æ™‚', a:'A'},
  {q:'3861 ç‚ºå“ªå€‹ç³»åˆ—çš„ç¾ä»£åŒ–æ©ŸèŠ¯ï¼ŸA. è¶…éœ¸ B. æ˜Ÿåº§', a:'A'},
  {q:'1861 æ©ŸèŠ¯å¸¸è¦‹æ–¼å“ªäº›å¾©åˆ»æ¬¾ï¼ŸA. è¶…éœ¸ç¶“å…¸/å¾©å¤ B. æµ·é¦¬', a:'A'},

  // power_reserve / å‹•åŠ›å„²èƒ½
  {q:'8900 é¡å‹æ©ŸèŠ¯çš„å„²èƒ½å¤§ç´„æ˜¯ï¼ŸA. 50-55 å°æ™‚ B. 60 å°æ™‚å·¦å³', a:'B'},
  {q:'å¸¸è¦‹ Master Co-Axial æ©ŸèŠ¯ç´„æœ‰å¤šå°‘å°æ™‚å„²èƒ½ï¼ŸA. 48-55 B. 60', a:'A'},
  {q:'æ—©æœŸæ‰‹å‹•æ©ŸèŠ¯æ™®éå„²èƒ½è¼ƒçŸ­ï¼Œå“ªå€‹é¸é …æ›´è²¼è¿‘ï¼ŸA. 40 å°æ™‚ B. 72 å°æ™‚', a:'A'},

  // features / åŠŸèƒ½
  {q:'æ½›æ°´éŒ¶å¸¸è¦‹çš„åŠŸèƒ½æ˜¯ï¼ŸA. æ’æ°¦é–¥é–€ B. è¨ˆæ™‚æ¸¬é€Ÿåœˆ', a:'A'},
  {q:'è¶…éœ¸ç³»åˆ—çš„ç¶“å…¸ç‰¹å¾µå¸¸è¦‹æ–¼ï¼ŸA. æ¸¬é€Ÿåœˆ B. è’™çš®éŒ¶æ®¼', a:'A'},
  {q:'æµ·é¦¬ Aqua Terra é¢ç›¤å¸¸è¦‹çš„è£é£¾æ˜¯ï¼ŸA. Teak æœ¨ç´‹ B. æ³¢æµªç´‹', a:'A'}, // note: some versions use teak
  {q:'Planet Ocean ç³»åˆ—é€šå¸¸å¼·èª¿æ·±æ½›é˜²æ°´ï¼Œå“ªå€‹é¸é …æ­£ç¢ºï¼ŸA. æ˜¯ B. å¦', a:'A'},
  {q:'æ—‹å…¥å¼éŒ¶å† ä¸»è¦ç”¨ä¾†ï¼ŸA. å¢åŠ ç¾è§€ B. æ”¹å–„é˜²æ°´', a:'B'},

  // certification / èªè­‰
  {q:'METAS èªè­‰çš„æŠ—ç£æ¨™æº–å¸¸ä»¥å¤šå°‘é«˜æ–¯ç‚ºä»£è¡¨ï¼ŸA. 5,000 B. 15,000', a:'B'},
  {q:'COSC ç‚ºå“ªä¸€ç¨®èªè­‰ï¼ŸA. æ©ŸèŠ¯å¤©æ–‡å°èªè­‰ B. è€ç£æ¸¬è©¦', a:'A'},
  {q:'Master Chronometer æ˜¯ç”±å“ªå…©å€‹æ©Ÿæ§‹å…±åŒé©—è­‰ï¼ŸA. Omega + METAS B. COSC + ISO', a:'A'},

  // application / æ‡‰ç”¨æ¨è–¦
  {q:'è‹¥å®¢äººæƒ³è¦å•†å‹™æ­£è£éŒ¶ï¼Œæ¨è–¦å“ªå€‹ç³»åˆ—ï¼ŸA. è¶é£›/æ˜Ÿåº§ B. è¶…éœ¸æ½›æ°´æ¬¾', a:'A'},
  {q:'æ„›å¥½æ½›æ°´è€…æ‡‰æ¨è–¦ï¼ŸA. æ˜Ÿåº§ B. æµ·é¦¬', a:'B'},

  // more mixed questions to reach 60
  {q:'å“ªå€‹ç³»åˆ—èˆ‡ NASA ç™»æœˆä»»å‹™æœ‰é—œï¼ŸA. è¶…éœ¸ B. æ˜Ÿåº§', a:'A'},
  {q:'æµ·é¦¬ Diver 300M å¸¸è¦‹åŠŸèƒ½åŒ…å«ï¼ŸA. æ³¢æµªç´‹é¢ç›¤ B. è¨ˆæ™‚ç¢¼è¡¨', a:'A'},
  {q:'æ˜Ÿåº§ Globemaster æœ‰åçš„ç‰¹å¾µæ˜¯ï¼ŸA. æ‰­ç´¢éŒ¶å¸¶ B. é¬†é¤…åœˆ', a:'B'},
  {q:'æœ‰ METAS èªè­‰çš„éŒ¶å…¶ç²¾æº–åº¦å®£ç¨±é€šå¸¸ç‚ºï¼ŸA. 0/+5 ç§’ B. -4/+6 ç§’', a:'A'},
  {q:'Hesaliteï¼ˆå£“å…‹åŠ›ï¼‰ç»ç’ƒå¸¸è¦‹æ–¼å“ªç¨®è¶…éœ¸ç‰ˆæœ¬ï¼ŸA. ç¶“å…¸æ¬¾/å¾©åˆ» B. ç¾ä»£é™¶ç“·æ¬¾', a:'A'},
  {q:'æ’æ°¦é–¥é–€ä¸»è¦ç”¨æ–¼ï¼ŸA. æ½›æ°´å“¡åœ¨é£½å’Œæ½›æ°´æ™‚æ’æ°£ B. è¨ˆæ™‚ç”¨é€”', a:'A'},
  {q:'æµ·é¦¬ Planet Ocean çš„é˜²æ°´æ•¸å€¼å¸¸è¦‹ç‚ºï¼ŸA. 600 ç±³ B. 100 ç±³', a:'A'},
  {q:'è¶…éœ¸çš„è¨ˆæ™‚æŒ‰éˆ•é€šå¸¸ä½æ–¼å“ªå€‹ä½ç½®ï¼ŸA. 2 é» & 4 é» B. 12 é»', a:'A'},
  {q:'Teak æœ¨ç´‹é¢ç›¤å¤šè¦‹æ–¼å“ªå€‹å­ç³»åˆ—ï¼ŸA. Aqua Terra B. Planet Ocean', a:'A'},
  {q:'Globemaster ä½¿ç”¨çš„éŒ¶åœˆé€šå¸¸æ˜¯ï¼ŸA. å¹³æ»‘æœˆç‰™åœˆ B. é‹¸é½’å¼è²æ®¼åœˆ', a:'A'},

  // more: calibration, history, usage
  {q:'Omega çš„ä»£è¡¨æ€§ç¬¦è™Ÿæ˜¯ï¼ŸA. é¯Šé­š B. å¸Œè‡˜å­—æ¯ Î©', a:'B'},
  {q:'Co-Axial æ“’ç¸±ç³»çµ±çš„ä¸»è¦å„ªé»æ˜¯ï¼ŸA. æ¸›å°‘æ‘©æ“¦å»¶é•·ä¿é¤Šé–“éš” B. å¢åŠ é‡é‡', a:'A'},
  {q:'æŸäº›é«˜éš Omega æ©ŸèŠ¯å…·å‚™é›™ç™¼æ¢ç›’ï¼Œé€™æœƒå¸¶ä¾†ï¼ŸA. æ›´é•·çš„å‹•åŠ›å„²èƒ½ B. æ¸›å°‘æŒ¯å¹…', a:'A'},
  {q:'è¶…éœ¸ 3861 èˆ‡ 1861 çš„é—œéµå·®ç•°é€šå¸¸åœ¨æ–¼ï¼ŸA. èˆ‡ç¾ä»£å‡ç´š (ä¾‹å¦‚åŒè»¸ & æŠ—ç£) B. å¤–è§€å°ºå¯¸', a:'A'},

  // additions to reach 60 total (fill with plausible training Qs)
  {q:'æµ·é¦¬ç³»åˆ—å¸¸ç”¨æ–¼å“ªç¨®å®¢ç¾¤ï¼ŸA. éœ€è¦æ½›æ°´åŠŸèƒ½è€… B. å–œæ­¡æ­£è£è€…', a:'A'},
  {q:'æ˜Ÿåº§ç³»åˆ—æœ€æ—©ä»¥å“ªé …ç‚ºä¸»æ‰“ï¼ŸA. å„ªé›…æ­£è£ B. æ·±æ½›å°ˆæ¥­', a:'A'},
  {q:'è¶é£›è¨­è¨ˆé¢¨æ ¼åå‘ï¼ŸA. æ¥µç°¡å„ªé›… B. å·¥å…·éŒ¶', a:'A'},
  {q:'Planet Ocean ç³»åˆ—å¸¸æ­é…çš„è¡¨åœˆæè³ªç‚ºï¼ŸA. é™¶ç“· B. çš®é©', a:'A'},
  {q:'Master Chronometer èªè­‰åŒ…å«å“ªç¨®æ¸¬è©¦é …ç›®ï¼ŸA. æŠ—ç£ã€æº–ç¢ºæ€§ç­‰å¤šé … B. åªæœ‰é˜²æ°´', a:'A'},
  {q:'æŸäº› Omega è¨ˆæ™‚ç¢¼éŒ¶ä½¿ç”¨å“ªç¨®è¨ˆæ™‚åœˆï¼ŸA. æ¸¬é€Ÿåœˆ (Tachymeter) B. æ½›æ°´åœˆ', a:'A'},
  {q:'æµ·é¦¬ 300ï¼ˆSeamaster 300ï¼‰æ›´åå‘å“ªç¨®ç”¨é€”ï¼ŸA. å¤å…¸æ½›æ°´/å¾©åˆ» B. æ¡Œé¢ä½©æˆ´', a:'A'},
  {q:'è¶…éœ¸ Moonwatch å‚³çµ±ä¸Šé…å‚™ä½•ç¨®ç»ç’ƒï¼ŸA. Hesalite B. è—å¯¶çŸ³', a:'A'},
  {q:'Globemaster æœ‰ä¸€é …ç‰¹æ®Šçš„ã€Œé¤…ä¹¾ç´‹ã€é¢ç›¤ï¼Œé€™æ˜¯ï¼ŸA. é¬†é¤…ç´‹ (Pie Pan) B. åŒå¿ƒåœ“ç´‹', a:'A'},
  {q:'Co-Axial æ“’ç¸±æœ€åˆç”±èª°æå‡ºï¼ŸA. George Daniels B. Abraham-Louis Breguet', a:'A'},
  {q:'OMEGA çš„è‹±æ–‡ç™¼éŸ³é€šå¸¸æ€éº¼è®€ï¼ŸA. Oh-mega B. O-mega', a:'A'},
  {q:'æœ‰äº›æµ·é¦¬å‹è™Ÿç‚ºæ½›æ°´ç”¨é€”è€Œæœ‰æ—‹å…¥å¼éŒ¶å† ï¼Œä½œç”¨æ˜¯ï¼ŸA. æ”¹å–„é˜²æ°´æ€§ B. æ”¹å–„ä½©æˆ´èˆ’é©åº¦', a:'A'},
  {q:'æŸäº›é«˜éš Omega æ©ŸèŠ¯çš„æŠ—ç£æ•¸å€¼å¸¸è¦‹æ¨™ç¤ºç‚ºï¼ŸA. 15,000 é«˜æ–¯ B. 500 é«˜æ–¯', a:'A'},
  {q:'è¶…éœ¸çš„æ­·å²èˆ‡å“ªå€‹å¹´ä»£çš„èˆªå¤ªä»»å‹™æœ€ç›¸é—œï¼ŸA. 1960s B. 1980s', a:'A'}
];
// ç¢ºä¿é¡Œåº«å¤§å°ç‚º 60ï¼ˆå¦‚éœ€æ›´å¤šé¡Œå¯æ“´å……æ­¤é™£åˆ—ï¼‰

// ------------- éŠæˆ²ç‹€æ…‹ -------------
let pool = [];           // æ´—ç‰Œå¾Œçš„é¡Œåº«
let poolPointer = 0;     // æŒ‡å‘ä¸‹ä¸€é¡Œçš„ index
let currentBatch = [];   // æœ¬è¼ª 5 é¡Œï¼ˆç‰©ä»¶é™£åˆ—ï¼‰
let currentQIndex = 0;   // åœ¨æœ¬è¼ªå…§é¡Œç›®çš„ pointer (0..4)
let currentScore = 0;
let totalRounds = 0;
let wrongLog = [];       // å…¨éŠæˆ²éŒ¯é¡Œç´¯ç©
let roundSize = 5;

// UI å…ƒç´ 
const qtext = document.getElementById('qtext');
const qIndexEl = document.getElementById('qIndex');
const roundProgressEl = document.getElementById('roundProgress');
const scoreVal = document.getElementById('scoreVal');
const progressBar = document.getElementById('progressBar');
const remainEl = document.getElementById('remain');
const totalRoundsEl = document.getElementById('totalRounds');
const feedbackEl = document.getElementById('feedback');
const answerInput = document.getElementById('answerInput');
const submitBtn = document.getElementById('submitBtn');
const startBtn = document.getElementById('startBtn');
const reportBtn = document.getElementById('reportBtn');

// ------------- å·¥å…·å‡½å¼ -------------
function shuffleArray(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

// åˆå§‹åŒ–æ± ï¼ˆæ´—ç‰Œï¼‰
function initPool(){
  pool = allQuestions.slice(); // è¤‡è£½
  shuffleArray(pool);
  poolPointer = 0;
  remainEl.textContent = pool.length - poolPointer;
}

// å–å¾—ä¸‹ä¸€æ‰¹é¡Œï¼ˆ5 é¡Œï¼‰ï¼Œè‹¥ä¸è¶³è‡ªå‹•é‡æ´—ï¼ˆé‡æ–°å»ºç«‹ pool ä¸¦ç¹¼çºŒï¼‰
function drawNextBatch(){
  currentBatch = [];
  while(currentBatch.length < roundSize){
    if(poolPointer >= pool.length){
      // pool ç”¨ç›¡ï¼Œé‡æ–°æ´—ç‰Œä¸¦æ¥è‘—æŠ½ï¼ˆåŒä¸€è¼ªå…§ä¸æœƒé‡è¤‡ï¼Œé™¤éæ•´å€‹é¡Œåº«è¼ªéä¸€éï¼‰
      initPool();
    }
    currentBatch.push(pool[poolPointer]);
    poolPointer++;
  }
  remainEl.textContent = pool.length - poolPointer;
  currentQIndex = 0;
  currentScore = 0;
  updateUI();
}

// é¡¯ç¤ºç›®å‰é¡Œç›®
function showCurrentQuestion(){
  if(!currentBatch.length){ qtext.textContent = 'è«‹æŒ‰ã€Œé–‹å§‹ / æ›äº”é¡Œã€æŠ½é¡Œ'; qIndexEl.textContent='-'; roundProgressEl.textContent='0'; return; }
  const idx = currentQIndex + 1;
  qIndexEl.textContent = idx;
  roundProgressEl.textContent = currentQIndex + '/' + roundSize;
  qtext.textContent = currentBatch[currentQIndex].q;
  feedbackEl.innerHTML = '';
  answerInput.value = '';
  answerInput.focus();
  updateProgress();
}

// æ›´æ–°é€²åº¦æ¢èˆ‡åˆ†æ•¸é¡¯ç¤º
function updateProgress(){
  scoreVal.textContent = currentScore;
  const pct = ((currentQIndex) / roundSize) * 100;
  progressBar.style.width = pct + '%';
  totalRoundsEl.textContent = totalRounds;
  remainEl.textContent = pool.length - poolPointer;
}

// è™•ç†æäº¤ç­”æ¡ˆ
function submitAnswer(){
  if(!currentBatch.length) return;
  const raw = answerInput.value.trim().toUpperCase();
  if(!raw) { feedbackEl.innerHTML = '<span class="bad">è«‹è¼¸å…¥ A æˆ– B å†æäº¤</span>'; return; }
  const user = raw[0];
  const correct = currentBatch[currentQIndex].a.toUpperCase();

  if(user === correct){
    currentScore++;
    feedbackEl.innerHTML = '<span class="ok">âœ… æ­£ç¢ºï¼</span>';
  } else {
    wrongLog.push({
      q: currentBatch[currentQIndex].q,
      a: currentBatch[currentQIndex].a
    });
    feedbackEl.innerHTML = `<span class="bad">âŒ éŒ¯èª¤ï¼æ­£ç¢ºç­”æ¡ˆï¼š${currentBatch[currentQIndex].a}</span>`;
  }

  // å°å»¶é²è®“ä½¿ç”¨è€…çœ‹åˆ°å›é¥‹ï¼Œå†é€²å…¥ä¸‹ä¸€é¡Œæˆ–çµç®—
  setTimeout(() => {
    currentQIndex++;
    if(currentQIndex < roundSize){
      showCurrentQuestion();
    } else {
      // æœ¬è¼ªçµæŸ
      progressBar.style.width = '100%';
      if(currentScore === roundSize){
        totalRounds++;
        alert(`ğŸ‰ æœ¬è¼ª ${currentScore}/${roundSize} å…¨å°ï¼é€²å…¥ç¬¬ ${totalRounds} è¼ªã€‚`);
      } else {
        alert(`æœ¬è¼ª ${currentScore}/${roundSize}ï¼ˆæœªå…¨å°ï¼‰ã€‚ç³»çµ±å°‡æŠ½ä¸‹ä¸€çµ„é¡Œç›®ï¼Œç¹¼çºŒç·´ç¿’ã€‚`);
      }
      // è‡ªå‹•æŠ½ä¸‹ä¸€æ‰¹ï¼ˆéŠæˆ²è¦å‰‡ï¼šä¸è«–æ˜¯å¦å…¨å°éƒ½æ›ä¸‹ä¸€æ‰¹é¡Œï¼‰
      drawNextBatch();
      showCurrentQuestion();
    }
    updateProgress();
  }, 500);
}

// ä¸‹è¼‰éŒ¯é¡Œå ±å‘Š
function downloadReport(){
  const now = new Date().toLocaleString('zh-TW');
  let content = `æ­ç±³ä¼½è¨“ç·´å ±å‘Š - ${now}\nç¸½è¼ªæ¬¡: ${totalRounds}\n\néŒ¯é¡Œæ¸…å–®:\n`;
  if(wrongLog.length === 0){
    content += 'ç„¡éŒ¯é¡Œï¼Œå®Œç¾ï¼\n';
  } else {
    wrongLog.forEach((w,i) => {
      content += `${i+1}. ${w.q}\næ­£ç¢ºç­”æ¡ˆ: ${w.a}\n\n`;
    });
  }
  const blob = new Blob([content], {type: 'text/plain;charset=utf-8'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `omega_report_${Date.now()}.txt`;
  a.click();
  URL.revokeObjectURL(url);
}

// ------------- äº‹ä»¶ç¶å®š -------------
submitBtn.addEventListener('click', submitAnswer);
answerInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') submitAnswer(); });
startBtn.addEventListener('click', () => {
  drawNextBatch();
  showCurrentQuestion();
});
reportBtn.addEventListener('click', downloadReport);

// åˆå§‹åŒ–
initPool();
updateProgress();
qtext.textContent = 'æŒ‰ã€Œé–‹å§‹ / æ›äº”é¡Œã€æŠ½ 5 é¡Œé–‹å§‹ç·´ç¿’';
</script>
</body>
</html>
