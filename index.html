<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­ç±³ä¼½ç³»åˆ—è¦æ ¼è¨“ç·´éŠæˆ²ï¼ˆV6.1 å®Œæ•´ä¿®æ­£ç‰ˆï¼‰</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #f0f0f0; padding: 10px; }
        #grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 300px; margin: 20px auto; }
        .cell { background: #007bff; color: white; padding: 20px; font-size: 24px; cursor: pointer; border-radius: 10px; user-select: none; }
        .cell:hover { background: #0056b3; }
        .cell.selected { background: #28a745; }
        #question { font-size: 18px; margin: 20px; padding: 15px; background: white; border-radius: 10px; min-height: 80px; }
        #answer { margin: 10px; padding: 10px; font-size: 16px; }
        #score { font-size: 24px; color: #007bff; margin-top: 10px; }
        #progress { width: 100%; height: 20px; background: #ddd; border-radius: 10px; margin-top: 5px; }
        #progress-bar { height: 100%; background: #28a745; width: 0%; transition: width 0.3s; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; margin: 10px; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #report { display: none; background: white; padding: 20px; margin: 20px; border-radius: 10px; }
        @media (max-width: 600px) { .cell { padding: 15px; font-size: 20px; } #question { font-size: 16px; } }
    </style>
</head>
<body>
    <h1>æ­ç±³ä¼½ç³»åˆ—è¦æ ¼è¨“ç·´éŠæˆ²ï¼ˆV6.1 - ä¿®æ­£ç‰ˆï¼‰</h1>
    <p>ğŸ¯ é»æ“Šä¹å®®æ ¼æŠ½ 5 é¡Œï¼Œå…¨å°å³å¯é€²å…¥ä¸‹ä¸€è¼ªï¼›ç­”éŒ¯æœƒé‡ä¾†ï¼ï¼ˆè¼¸å…¥ A æˆ– Bï¼‰</p>

    <div id="grid">
        <div class="cell" data-cell="1">1</div>
        <div class="cell" data-cell="2">2</div>
        <div class="cell" data-cell="3">3</div>
        <div class="cell" data-cell="4">4</div>
        <div class="cell" data-cell="5">5</div>
        <div class="cell" data-cell="6">6</div>
        <div class="cell" data-cell="7">7</div>
        <div class="cell" data-cell="8">8</div>
        <div class="cell" data-cell="9">9</div>
    </div>

    <div id="question"></div>
    <input type="text" id="answer" placeholder="è¼¸å…¥ A æˆ– B..." style="width: 80%; padding: 10px;">
    <button onclick="submitAnswer()">æäº¤ç­”æ¡ˆ</button>

    <div id="score">æœ¬è¼ªåˆ†æ•¸: 0/5</div>
    <div id="progress"><div id="progress-bar"></div></div>

    <button onclick="downloadReport()">ğŸ“„ ä¸‹è¼‰éŒ¯é¡Œå ±å‘Š</button>

    <script>
    // === ä¹å®®æ ¼é…ç½® ===
    const gridConfig = {
        1: 'series_name', 2: 'caliber', 3: 'power_reserve',
        4: 'features', 5: 'application', 6: 'certification',
        7: 'series_name', 8: 'power_reserve', 9: 'features'
    };
    const ROUND_GOAL = 5;

    // === é¡Œåº« ===
    const questionBank = {
        series_name: [
            {q: 'å“ªå€‹ç³»åˆ—æ˜¯æ­ç±³ä¼½çš„ç¶“å…¸æ­£è£éŒ¶ï¼ŸA. è¶…éœ¸ B. è¶é£›', a: 'B'},
            {q: 'å“ªå€‹ç³»åˆ—ä»¥ç™»æœˆæ•…äº‹èåï¼ŸA. æµ·é¦¬ B. è¶…éœ¸', a: 'B'},
            {q: 'å“ªå€‹ç³»åˆ—æ“æœ‰æ‰˜çˆªè¨­è¨ˆï¼ŸA. æ˜Ÿåº§ B. è¶é£›', a: 'A'},
            {q: 'æ½›æ°´ç³»åˆ—æ˜¯ï¼ŸA. æ˜Ÿåº§ B. æµ·é¦¬', a: 'B'},
            {q: 'Aqua Terra å­ç³»åˆ—å±¬æ–¼ï¼ŸA. è¶…éœ¸ B. æµ·é¦¬', a: 'B'}
        ],
        caliber: [
            {q: 'è¶…éœ¸æ–°ç‰ˆæ‰‹å‹•æ©ŸèŠ¯æ˜¯ï¼ŸA. 8800 B. 3861', a: 'B'},
            {q: 'æµ·é¦¬ Diver 300M è‡ªå‹•æ©ŸèŠ¯æ˜¯ï¼ŸA. 3861 B. 8800', a: 'B'},
            {q: 'æ˜Ÿåº§é›™ç™¼æ¢æ©ŸèŠ¯æ˜¯ï¼ŸA. 3861 B. 8900', a: 'B'},
            {q: 'è¶é£›ä¸»æµæ©ŸèŠ¯æ˜¯æ‰‹å‹•ï¼ŸA. æ˜¯ B. å¦', a: 'B'},
            {q: 'æµ·é¦¬ Planet Ocean æ©ŸèŠ¯æ˜¯ï¼ŸA. 3861 B. 8900', a: 'B'}
        ],
        power_reserve: [
            {q: 'æµ·é¦¬ 8800 æ©ŸèŠ¯å„²èƒ½æ˜¯ï¼ŸA. 50 å°æ™‚ B. 55 å°æ™‚', a: 'B'},
            {q: 'è¶…éœ¸ 3861 å„²èƒ½æ˜¯ï¼ŸA. 55 å°æ™‚ B. 50 å°æ™‚', a: 'B'},
            {q: 'æµ·é¦¬ Aqua Terra 8900 å„²èƒ½æ˜¯ï¼ŸA. 50 å°æ™‚ B. 60 å°æ™‚', a: 'B'},
            {q: 'è¶é£› 8926 å„²èƒ½æœ€æ¥è¿‘ï¼ŸA. 50 å°æ™‚ B. 60 å°æ™‚', a: 'B'},
            {q: 'è¶…éœ¸ 1861 å„²èƒ½æ˜¯ï¼ŸA. 60 å°æ™‚ B. 48 å°æ™‚', a: 'B'}
        ],
        features: [
            {q: 'æµ·é¦¬æ½›æ°´åŠŸèƒ½æ˜¯ï¼ŸA. æ¸¬é€Ÿåœˆ B. æ’æ°¦é–¥é–€', a: 'B'},
            {q: 'è¶…éœ¸éŒ¶åœˆåˆ»åº¦æ˜¯ï¼ŸA. æ’æ°¦é–¥é–€ B. æ¸¬é€Ÿåœˆ', a: 'B'},
            {q: 'æ˜Ÿåº§æ¨™èªŒæ€§ç‰¹å¾µæ˜¯ï¼ŸA. æ’æ°¦é–¥é–€ B. æ‰˜çˆª', a: 'B'},
            {q: 'è¶é£›é©åˆå ´åˆæ˜¯ï¼ŸA. æ½›æ°´ B. æ­£è£', a: 'B'},
            {q: 'è¶…éœ¸é˜²æ°´æ·±åº¦æ˜¯ï¼ŸA. 300 ç±³ B. 50 ç±³', a: 'B'}
        ],
        certification: [
            {q: 'æœ€é«˜æŠ—ç£èªè­‰æ˜¯ï¼ŸA. COSC B. METAS', a: 'B'},
            {q: 'METAS æŠ—ç£è¦æ±‚æ˜¯ï¼ŸA. 5,000 é«˜æ–¯ B. 15,000 é«˜æ–¯', a: 'B'},
            {q: 'è¶é£›å…¥é–€æ¬¾æœ‰ METASï¼ŸA. æ˜¯ B. å¦', a: 'B'},
            {q: 'æœ€æ—© METAS ç³»åˆ—æ˜¯ï¼ŸA. è¶…éœ¸ B. æµ·é¦¬', a: 'B'},
            {q: 'METAS æ¸¬è©¦é …ç›®æ˜¯ï¼ŸA. 3 é … B. 8 é …', a: 'B'}
        ],
        application: [
            {q: 'è¶…éœ¸é©åˆå®¢æˆ¶æ˜¯ï¼ŸA. æ­£è£æ„›å¥½è€… B. é‹å‹•å¤ªç©ºè¿·', a: 'B'},
            {q: 'æµ·é¦¬æ½›æ°´é©åˆå ´åˆæ˜¯ï¼ŸA. å•†å‹™æœƒè­° B. æ°´ä¸Šæ´»å‹•', a: 'B'},
            {q: 'æ˜Ÿåº§é©åˆç©¿æ­æ˜¯ï¼ŸA. é‹å‹•è£ B. å„ªé›…å•†å‹™', a: 'B'},
            {q: 'è¶é£›é©åˆå•†å‹™æœƒè­°ï¼ŸA. å¦ B. æ˜¯', a: 'B'},
            {q: 'è¶…éœ¸å®¢æˆ¶æ•…äº‹æ˜¯ï¼ŸA. æ½›æ°´è‹±é›„ B. ç™»æœˆå¤ªç©ºäºº', a: 'B'}
        ]
    };

    // === éŠæˆ²ç‹€æ…‹ ===
    let currentRound = [];
    let score = 0;
    let totalRounds = 0;
    let wrongLog = [];
    let currentQuestionData = null;
    let currentCell = null;

    // é»æ ¼æŠ½é¡Œ
    document.querySelectorAll('.cell').forEach(cell => {
        cell.addEventListener('click', () => {
            if (currentRound.length >= ROUND_GOAL) return;
            const num = parseInt(cell.dataset.cell);
            if (currentRound.includes(num)) return;

            currentCell = num;
            currentRound.push(num);
            cell.classList.add('selected');

            const qType = gridConfig[num];
            const qIdx = Math.floor(Math.random() * questionBank[qType].length);
            currentQuestionData = questionBank[qType][qIdx];
            document.getElementById('question').innerHTML = `<strong>æ ¼å­ ${num}</strong><br><br>${currentQuestionData.q}`;
            document.getElementById('answer').value = '';
            document.getElementById('answer').focus();
        });
    });

    // æäº¤ç­”æ¡ˆ
    function submitAnswer() {
        if (!currentQuestionData) return;
        const ans = document.getElementById('answer').value.trim().toUpperCase();
        const feedback = document.getElementById('question');

        if (ans === currentQuestionData.a) {
            score++;
            feedback.innerHTML += `<br><span style="color:green;">âœ… æ­£ç¢ºï¼</span>`;
        } else {
            wrongLog.push({ cell: currentCell, q: currentQuestionData.q, a: currentQuestionData.a });
            feedback.innerHTML += `<br><span style="color:red;">âŒ éŒ¯èª¤ï¼æ­£ç¢ºç­”æ¡ˆ: ${currentQuestionData.a}</span>`;
        }

        document.getElementById('score').textContent = `æœ¬è¼ªåˆ†æ•¸: ${score}/${ROUND_GOAL}`;
        document.getElementById('progress-bar').style.width = `${(currentRound.length / ROUND_GOAL) * 100}%`;

        currentQuestionData = null;

        if (currentRound.length === ROUND_GOAL) {
            setTimeout(() => {
                if (score === ROUND_GOAL) {
                    totalRounds++;
                    alert(`ğŸ‰ æ­å–œå…¨å°ï¼é€²å…¥ç¬¬ ${totalRounds} è¼ªï¼`);
                    startNewRound();
                } else {
                    alert(`æœ¬è¼ª ${score}/5ï¼Œæœªå…¨å°ï¼é‡ç½®é‡ä¾†ã€‚`);
                    resetRound();
                }
            }, 500);
        }
    }

    // é‡ç½®æœ¬è¼ª
    function resetRound() {
        currentRound = [];
        score = 0;
        document.querySelectorAll('.cell').forEach(c => c.classList.remove('selected'));
        document.getElementById('question').innerHTML = '';
        document.getElementById('answer').value = '';
        document.getElementById('score').textContent = 'æœ¬è¼ªåˆ†æ•¸: 0/5';
        document.getElementById('progress-bar').style.width = '0%';
        currentQuestionData = null;
    }

    // å…¨å°å¾Œæ–°è¼ª
    function startNewRound() {
        resetRound();
        document.getElementById('question').innerHTML = `<span style="color:#007bff;">è«‹é‡æ–°é¸æ“‡äº”æ ¼é–‹å§‹æŒ‘æˆ°</span>`;
    }

    // ä¸‹è¼‰å ±å‘Š
    function downloadReport() {
        const now = new Date().toLocaleString('zh-TW');
        let txt = `æ­ç±³ä¼½è¨“ç·´å ±å‘Š - ${now}\n\nç¸½è¼ªæ¬¡: ${totalRounds}\n\néŒ¯é¡Œæ¸…å–®:\n`;
        if (wrongLog.length === 0) txt += 'ç„¡éŒ¯é¡Œï¼å®Œç¾ï¼';
        else wrongLog.forEach((w, i) => txt += `${i + 1}. [æ ¼ ${w.cell}] ${w.q}\næ­£è§£: ${w.a}\n\n`);
        const blob = new Blob([txt], { type: 'text/plain;charset=utf-8' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `omega_training_report_${Date.now()}.txt`;
        a.click();
        URL.revokeObjectURL(a.href);
    }

    // Enter æäº¤
    document.getElementById('answer').addEventListener('keypress', e => {
        if (e.key === 'Enter') submitAnswer();
    });
    </script>
</body>
</html>
