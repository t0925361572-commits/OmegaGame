<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歐米伽系列規格訓練遊戲（V7 - 加輪次統計）</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #f0f0f0; padding: 10px; }
        #grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 300px; margin: 20px auto; }
        .cell { background: #007bff; color: white; padding: 20px; font-size: 24px; cursor: pointer; border-radius: 10px; user-select: none; }
        .cell:hover { background: #0056b3; }
        .cell.selected { background: #28a745; }
        #question { font-size: 18px; margin: 20px; padding: 15px; background: white; border-radius: 10px; }
        #answer { margin: 10px; padding: 10px; font-size: 16px; }
        #score { font-size: 24px; color: #007bff; margin: 10px; }
        #round-display { font-size: 18px; color: #28a745; margin: 5px; font-weight: bold; }
        #progress { width: 80%; height: 10px; background: #ddd; border-radius: 5px; margin: 5px auto; display: inline-block; }
        #progress-bar { height: 100%; background: #28a745; width: 0%; transition: width 0.3s; border-radius: 5px; }
        button { background: #007bff; color: white; border: none; padding: 8px 16px; margin: 5px; border-radius: 5px; cursor: pointer; font-size: 14px; }
        button:hover { background: #0056b3; }
        #report { display: none; background: white; padding: 20px; margin: 20px; border-radius: 10px; max-height: 200px; overflow-y: auto; }
        @media (max-width: 600px) { .cell { padding: 15px; font-size: 20px; } #question { font-size: 16px; } #progress { width: 90%; } }
    </style>
</head>
<body>
    <h1>歐米伽系列規格訓練遊戲（V7 - 加輪次統計）</h1>
    <p>點擊九宮格抽5題，全對進入下一輪；錯題重置格子換新題重來！（輸入A或B）</p>
    
    <div id="grid">
        <div class="cell" data-cell="1">1</div>
        <div class="cell" data-cell="2">2</div>
        <div class="cell" data-cell="3">3</div>
        <div class="cell" data-cell="4">4</div>
        <div class="cell" data-cell="5">5</div>
        <div class="cell" data-cell="6">6</div>
        <div class="cell" data-cell="7">7</div>
        <div class="cell" data-cell="8">8</div>
        <div class="cell" data-cell="9">9</div>
    </div>
    
    <div id="question"></div>
    <input type="text" id="answer" placeholder="輸入A或B..." style="width: 80%; padding: 10px; margin: 10px;">
    <button onclick="submitAnswer()">提交答案</button>
    
    <div id="score">本輪分數: 0/5</div>
    <div id="round-display">目前第1輪</div>
    <div id="progress"><div id="progress-bar"></div></div>
    
    <button onclick="startNewRound()" style="display: none;" id="newRoundBtn">下一輪</button>
    <button onclick="downloadReport()" style="display: none;" id="reportBtn">下載報告</button>
    
    <div id="report"></div>

    <script>
        // 九宮格配置
        const gridConfig = {1: 'series_name', 2: 'caliber', 3: 'power_reserve', 4: 'features', 5: 'application', 6: 'certification', 7: 'series_name', 8: 'power_reserve', 9: 'features'};
        const ROUND_GOAL = 5; // 一輪5題
        
        // 題庫（90題A/B選擇題）
        const questionBank = {
            series_name: [
                {q: '哪個系列是歐米伽的經典正裝錶？A. 超霸 B. 蝶飛', a: 'B'},
                {q: '哪個系列以登月故事聞名？A. 海馬 B. 超霸', a: 'B'},
                {q: '哪個系列擁有托爪設計？A. 星座 B. 蝶飛', a: 'A'},
                {q: '潛水系列是？A. 星座 B. 海馬', a: 'B'},
                {q: 'Aqua Terra子系列屬於？A. 超霸 B. 海馬', a: 'B'},
                {q: '太空探險代表作是？A. 星座 B. 超霸', a: 'B'},
                {q: '四顆星徽特色是？A. 海馬 B. 星座', a: 'B'},
                {q: '不強調防水的是？A. 海馬 B. 蝶飛', a: 'B'},
                {q: '年曆複雜功能多見於？A. 超霸 B. 蝶飛', a: 'B'},
                {q: '優雅女士錶多屬於？A. 超霸 B. 星座', a: 'B'},
                {q: 'Professional計時版是？A. 海馬 B. 超霸', a: 'B'},
                {q: '海洋探險系列是？A. 星座 B. 海馬', a: 'B'},
                {q: '爪狀延展設計是？A. 蝶飛 B. 星座', a: 'B'},
                {q: '簡約三針日期多見於？A. 星座 B. 蝶飛', a: 'B'},
                {q: '防水僅50米專注計時的是？A. 海馬 B. 超霸', a: 'B'}
            ],
            caliber: [
                {q: '超霸新版手動機芯是？A. 8800 B. 3861', a: 'B'},
                {q: '海馬Diver 300M自動機芯是？A. 3861 B. 8800', a: 'B'},
                {q: '星座Aqua Terra雙發條機芯是？A. 3861 B. 8900', a: 'B'},
                {q: '蝶飛主流機芯是手動？A. 是 B. 否', a: 'B'},
                {q: '海馬Planet Ocean機芯是？A. 3861 B. 8900', a: 'B'},
                {q: '超霸\'57手動機芯是？A. 8800 B. 1861', a: 'B'},
                {q: '星座小秒針機芯是？A. 8900 B. 8800', a: 'B'},
                {q: '蝶飛Trinity機芯是？A. 3861 B. 8800', a: 'B'},
                {q: '手動上鍊機芯是？A. 8800 B. 3861', a: 'B'},
                {q: '海馬60小時機芯是？A. 8800 B. 8900', a: 'B'},
                {q: '超霸陶瓷款機芯是？A. 8800 B. 9300', a: 'B'},
                {q: '星座Globemaster機芯是？A. 3861 B. 8900', a: 'B'},
                {q: '蝶飛入門機芯是？A. 3861 B. 2500', a: 'B'},
                {q: '60小時儲能機芯是？A. 3861 B. 8900', a: 'B'},
                {q: '超霸手動機芯有月相？A. 是 B. 否', a: 'B'}
            ],
            power_reserve: [
                {q: '海馬8800機芯儲能是？A. 50小時 B. 55小時', a: 'B'},
                {q: '超霸3861儲能是？A. 55小時 B. 50小時', a: 'B'},
                {q: '海馬Aqua Terra 8900儲能是？A. 50小時 B. 60小時', a: 'B'},
                {q: '蝶飛8926儲能最接近？A. 50小時 B. 60小時', a: 'B'},
                {q: '超霸3861儲能是？A. 60小時 B. 50小時', a: 'B'},
                {q: '海馬8806儲能是？A. 60小時 B. 55小時', a: 'B'},
                {q: '星座8900儲能是？A. 50小時 B. 60小時', a: 'B'},
                {q: '蝶飛陀飛輪儲能是？A. 50小時 B. 60小時', a: 'B'},
                {q: '儲能最短系列是？A. 海馬 B. 超霸', a: 'B'},
                {q: '海馬Planet Ocean儲能是？A. 50小時 B. 60小時', a: 'B'},
                {q: '超霸1861儲能是？A. 60小時 B. 48小時', a: 'B'},
                {q: '星座8800儲能是？A. 60小時 B. 55小時', a: 'B'},
                {q: '蝶飛年曆儲能是？A. 60小時 B. 55小時', a: 'B'},
                {q: '8900儲能超過55小時？A. 否 B. 是', a: 'B'},
                {q: '超霸9300儲能是？A. 50小時 B. 60小時', a: 'B'}
            ],
            features: [
                {q: '海馬潛水實用功能是？A. 測速圈 B. 排氦閥門', a: 'B'},
                {q: '超霸錶圈刻度是？A. 排氦閥門 B. 測速圈', a: 'B'},
                {q: '星座標誌性特徵是？A. 排氦閥門 B. 托爪', a: 'B'},
                {q: '蝶飛適合場合是？A. 潛水 B. 正裝', a: 'B'},
                {q: '海馬Diver 300M有抗磁？A. 否 B. 是', a: 'B'},
                {q: '超霸Hesalite玻璃用於？A. 陶瓷版 B. Professional版', a: 'B'},
                {q: '星座錶圈材質是？A. 皮革 B. 陶瓷', a: 'B'},
                {q: '蝶飛無日期強調？A. 防水 B. 純淨美學', a: 'B'},
                {q: '海馬Aqua Terra錶圈獨特是？A. 陶瓷 B. Teak木紋', a: 'B'},
                {q: '超霸防水深度是？A. 300米 B. 50米', a: 'B'},
                {q: '星座尺寸範圍是？A. 40-50mm B. 25-41mm', a: 'B'},
                {q: '蝶飛有動力儲存顯示？A. 否 B. 是', a: 'B'},
                {q: '海馬旋入式錶冠用於？A. 美觀 B. 提升防水', a: 'B'},
                {q: '超霸計時按鈕位置是？A. 12點 B. 2點與4點', a: 'B'},
                {q: '星座爪狀延展作用是？A. 計時 B. 固定錶帶', a: 'B'}
            ],
            certification: [
                {q: '最高抗磁認證是？A. COSC B. METAS', a: 'B'},
                {q: 'METAS抗磁要求是？A. 5,000高斯 B. 15,000高斯', a: 'B'},
                {q: '蝶飛入門款有METAS？A. 是 B. 否', a: 'B'},
                {q: '最早METAS系列是？A. 超霸 B. 海馬', a: 'B'},
                {q: 'METAS精準標準是？A. -4/+6秒 B. 0/+5秒', a: 'B'},
                {q: 'COSC每日誤差是？A. 0/+5秒 B. -4/+6秒', a: 'B'},
                {q: '超霸3861有METAS？A. 否 B. 是', a: 'B'},
                {q: '星座Globemaster認證是？A. COSC B. METAS', a: 'B'},
                {q: '蝶飛石英款有認證？A. 是 B. 否', a: 'B'},
                {q: '海馬抗磁值是？A. 5,000高斯 B. 15,000高斯', a: 'B'},
                {q: 'METAS測試項目是？A. 3項 B. 8項', a: 'B'},
                {q: '超霸舊版861有METAS？A. 是 B. 否', a: 'B'},
                {q: '不包括抗磁認證是？A. METAS B. COSC', a: 'B'},
                {q: '星座METAS從何年？A. 2010年 B. 2015年', a: 'B'},
                {q: '蝶飛高端抗磁值是？A. 5,000高斯 B. 15,000高斯', a: 'B'}
            ],
            application: [
                {q: '超霸適合客戶是？A. 正裝愛好者 B. 運動太空迷', a: 'B'},
                {q: '海馬潛水適合場合是？A. 商務會議 B. 水上活動', a: 'B'},
                {q: '星座適合穿搭是？A. 運動裝 B. 優雅商務', a: 'B'},
                {q: '蝶飛適合商務會議？A. 否 B. 是', a: 'B'},
                {q: '超霸客戶故事是？A. 潛水英雄 B. 登月太空人', a: 'B'},
                {q: '海馬Aqua Terra適合？A. 室內辦公 B. 戶外運動', a: 'B'},
                {q: '星座Globemaster推薦給？A. 業餘玩家 B. 專業人士', a: 'B'},
                {q: '蝶飛年曆適合？A. 運動精英 B. 商務精英', a: 'B'},
                {q: '適合潛水愛好者是？A. 超霸 B. 海馬', a: 'B'},
                {q: '超霸測速圈應用是？A. 商務計時 B. 賽車運動', a: 'B'},
                {q: '星座托爪提升？A. 防水 B. 舒適度', a: 'B'},
                {q: '蝶飛無日期適合？A. 複雜風格 B. 極簡主義', a: 'B'},
                {q: '海馬Planet Ocean推薦？A. 100米 B. 600米潛水', a: 'B'},
                {q: '超霸有NASA認證？A. 否 B. 是', a: 'B'},
                {q: '星座適合年輕白領？A. 否 B. 是', a: 'B'}
            ]
        };
        
        let currentRound = [], score = 0, currentQ = -1, wrongQuestions = [], currentQuestionData = null, totalRounds = 0;
        
        // 更新輪次顯示
        function updateRoundDisplay() {
            document.getElementById('round-display').textContent = `目前第${totalRounds + 1}輪`;
        }
        
        // 點擊格子抽題
        document.querySelectorAll('.cell').forEach(cell => {
            cell.addEventListener('click', (e) => {
                e.preventDefault();
                if (currentRound.length < ROUND_GOAL) {
                    const cellNum = parseInt(cell.dataset.cell);
                    if (!currentRound.includes(cellNum)) {
                        currentRound.push(cellNum);
                        cell.classList.add('selected');
                        const qType = gridConfig[cellNum];
                        const qIndex = Math.floor(Math.random() * questionBank[qType].length);
                        currentQuestionData = questionBank[qType][qIndex];
                        document.getElementById('question').innerHTML = `<strong>格子 ${cellNum} (${qType})</strong><br><br>${currentQuestionData.q}`;
                        currentQ = currentRound.length - 1;
                        document.getElementById('answer').value = '';
                        document.getElementById('answer').focus();
                    }
                }
            });
        });
        
        // 提交答案
        function submitAnswer() {
            if (currentQ === -1 || !currentQuestionData) return;
            const userAnswer = document.getElementById('answer').value.toLowerCase().trim();
            const correctAnswer = currentQuestionData.a.toLowerCase();
            const isCorrect = userAnswer.includes(correctAnswer);
            
            const feedback = document.getElementById('question');
            if (isCorrect) {
                score++;
                feedback.innerHTML += '<br><span style="color:green;">✅ 正確！</span>';
            } else {
                wrongQuestions.push({cell: currentRound[currentQ], q: currentQuestionData.q, a: currentQuestionData.a});
                feedback.innerHTML += `<br><span style="color:red;">❌ 錯誤！正確答案: ${currentQuestionData.a}</span>`;
            }
            
            document.getElementById('score').textContent = `本輪分數: ${score}/${currentRound.length}`;
            document.getElementById('progress-bar').style.width = `${(currentRound.length / ROUND_GOAL) * 100}%`;
            
            document.getElementById('answer').disabled = true;
            setTimeout(() => { 
                document.getElementById('answer').disabled = false; 
                document.getElementById('answer').value = ''; 
                document.getElementById('question').innerHTML = ''; // 清題目
                if (currentRound.length < ROUND_GOAL) {
                    // 繼續抽下格子
                } else {
                    // 檢查本輪
                    if (score === ROUND_GOAL) {
                        totalRounds++;
                        updateRoundDisplay();
                        document.getElementById('newRoundBtn').style.display = 'inline';
                        document.getElementById('reportBtn').style.display = 'inline';
                        document.getElementById('report').innerHTML = `<h3>恭喜！本輪全對，總輪次: ${totalRounds}</h3>`;
                        document.getElementById('report').style.display = 'block';
                        alert(`恭喜！本輪全對，進入第 ${totalRounds + 1} 輪。`);
                    } else {
                        // 重置本輪
                        alert(`本輪 ${score}/5，未全對！重置格子，換新題重來。`);
                        resetRound();
                    }
                }
            }, 2000);
        }
        
        // 重置本輪（蓋起格子，換新題）
        function resetRound() {
            currentRound = [];
            score = 0;
            document.querySelectorAll('.cell').forEach(c => c.classList.remove('selected'));
            document.getElementById('question').innerHTML = '';
            document.getElementById('answer').value = '';
            document.getElementById('answer').disabled = false;
            document.getElementById('score').textContent = `本輪分數: 0/5`;
            document.getElementById('progress-bar').style.width = '0%';
            document.getElementById('newRoundBtn').style.display = 'none';
            document.getElementById('reportBtn').style.display = 'none';
            document.getElementById('report').style.display = 'none';
            wrongQuestions = []; // 每輪清錯題
            updateRoundDisplay(); // 更新顯示
        }
        
        // 新的一輪（全對後）
        function startNewRound() {
            resetRound();
            totalRounds++;
            updateRoundDisplay();
            alert(`開始第 ${totalRounds + 1} 輪！抽5格全對過關。`);
        }
        
        // 下載報告（記錄所有錯題）
        function downloadReport() {
            const now = new Date().toLocaleString('zh-TW');
            let reportContent = `歐米伽訓練報告 - ${now}\n總輪次: ${totalRounds}\n\n錯題清單（重點複習）:\n`;
            if (wrongQuestions.length === 0) {
                reportContent += '無錯題！完美！\n';
            } else {
                wrongQuestions.forEach(w => {
                    reportContent += `格子 ${w.cell}: ${w.q}\n正確答案: ${w.a}\n\n`;
                });
            }
            const blob = new Blob([reportContent], {type: 'text/plain;charset=utf-8'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `omega_training_report_${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // Enter鍵提交
        document.getElementById('answer').addEventListener('keypress', (e) => { 
            if (e.key === 'Enter') submitAnswer(); 
        });
        
        // 初始顯示
        updateRoundDisplay();
    </script>
</body>
</html>
