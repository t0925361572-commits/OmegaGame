<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>歐米伽訓練遊戲（V8.2 精簡版）</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f6fa;
  color: #222;
  margin: 0;
  padding: 20px;
  text-align: center;
}
.container {
  max-width: 720px;
  margin: auto;
  background: #fff;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,.08);
}
h1 {
  margin-top: 0;
  color: #007bff;
}
#questionBox {
  background: #fafafa;
  border: 2px solid #ddd;
  border-radius: 8px;
  padding: 20px;
  margin: 20px 0;
  font-size: 18px;
  line-height: 1.5;
}
#qmeta {
  font-size: 14px;
  color: #666;
  margin-bottom: 8px;
}
#feedback {
  margin-top: 15px;
  font-weight: bold;
  font-size: 17px;
  padding: 10px;
  border-radius: 8px;
  display: inline-block;
}
.ok {
  background: #e7f7e7;
  color: #198754;
  border: 1px solid #198754;
}
.bad {
  background: #fde8e8;
  color: #c82333;
  border: 1px solid #c82333;
}
input[type="text"] {
  padding: 10px;
  font-size: 18px;
  width: 120px;
  text-align: center;
  text-transform: uppercase;
  border: 1px solid #ccc;
  border-radius: 6px;
}
button {
  background: #007bff;
  color: #fff;
  border: none;
  padding: 10px 18px;
  margin: 8px;
  border-radius: 6px;
  font-size: 16px;
  cursor: pointer;
}
button:hover { background: #0056b3; }
button.secondary { background: #6c757d; }
#progress { width: 100%; height: 12px; background: #eee; border-radius: 10px; margin: 10px 0; overflow: hidden; }
#progressBar { height: 100%; width: 0%; background: #28a745; transition: width .3s; }
#score { font-size: 18px; color: #007bff; }
footer { font-size: 13px; color: #666; margin-top: 15px; }
</style>
</head>
<body>
<div class="container">
  <h1>歐米伽訓練遊戲</h1>
  <p id="intro">每輪 5 題，輸入 <strong>A</strong> 或 <strong>B</strong> 答題，全對進下一輪。</p>

  <div id="questionBox">
    <div id="qmeta">按「開始」抽題</div>
    <div id="qtext" style="min-height:60px;">準備好了嗎？</div>
  </div>

  <input id="answerInput" type="text" maxlength="2" placeholder="A 或 B">
  <button id="submitBtn">提交</button>
  <button id="startBtn">開始</button>
  <button id="reportBtn" class="secondary">下載錯題</button>

  <div id="score">本輪分數：<span id="scoreVal">0</span>/5</div>
  <div id="progress"><div id="progressBar"></div></div>
  <div id="feedback"></div>

  <footer>
    總輪次：<span id="totalRounds">0</span>　剩餘題數：<span id="remain">0</span>
  </footer>
</div>

<script>
// === 題庫（略，60 題） ===
const allQuestions = [
  {q:'哪個系列以登月故事聞名？A. 海馬 B. 超霸',a:'B'},
  {q:'潛水性能最強的系列是哪個？A. 超霸 B. 海馬',a:'B'},
  {q:'星座系列的標誌性設計是？A. 托爪 B. 排氦閥門',a:'A'},
  {q:'蝶飛系列主要訴求是？A. 正裝優雅 B. 運動耐用',a:'A'},
  {q:'Aqua Terra 屬於哪個主要系列？A. 超霸 B. 海馬',a:'B'},
  {q:'哪個系列經常用於計時賽車風格？A. 超霸 B. 星座',a:'A'},
  {q:'METAS 認證常見於哪類高階機芯？A. 天文台認證 B. Master Chronometer',a:'B'},
  {q:'8900 機芯常見於哪個系列？A. 星座 B. 超霸',a:'A'},
  {q:'海馬 8800 機芯儲能是？A. 約55小時 B. 約72小時',a:'A'},
  {q:'3861 為哪個系列的現代化機芯？A. 超霸 B. 星座',a:'A'},
  {q:'潛水錶常見的功能是？A. 排氦閥門 B. 測速圈',a:'A'},
  {q:'超霸錶圈刻度是？A. 排氦閥門 B. 測速圈',a:'B'},
  {q:'海馬 Aqua Terra 面盤常見的裝飾是？A. Teak 木紋 B. 波浪紋',a:'A'},
  {q:'Planet Ocean 系列通常強調深潛防水，哪個選項正確？A. 是 B. 否',a:'A'},
  {q:'旋入式錶冠主要用來？A. 美觀 B. 防水',a:'B'},
  {q:'METAS 抗磁標準約為？A. 5,000 高斯 B. 15,000 高斯',a:'B'},
  {q:'COSC 為哪一種認證？A. 天文台機芯 B. 抗磁測試',a:'A'},
  {q:'若客人想要商務正裝錶，推薦哪個系列？A. 蝶飛/星座 B. 超霸',a:'A'},
  {q:'愛好潛水者應推薦？A. 星座 B. 海馬',a:'B'},
  {q:'Hesalite 玻璃常見於哪種超霸？A. 經典款 B. 陶瓷款',a:'A'},
  {q:'排氦閥門主要用於？A. 潛水員飽和排氣 B. 計時',a:'A'},
  {q:'海馬 Planet Ocean 的防水常見為？A. 600米 B. 100米',a:'A'},
  {q:'超霸的計時按鈕位置？A. 2點與4點 B. 12點',a:'A'},
  {q:'Teak 面盤多見於哪個系列？A. Aqua Terra B. Planet Ocean',a:'A'},
  {q:'Co-Axial 擒縱主要優點？A. 減摩耗延保養 B. 增重量',a:'A'},
  {q:'雙發條盒設計可？A. 延長動力 B. 降低精度',a:'A'},
  {q:'超霸與哪年代太空任務關聯？A. 1960s B. 1980s',a:'A'},
  {q:'Omega 代表符號？A. 鯊魚 B. Ω',a:'B'},
  {q:'Master Chronometer 認證測試幾項？A. 8 項 B. 3 項',a:'A'},
  {q:'海馬系列面向？A. 潛水者 B. 紳士正裝',a:'A'},
  {q:'星座系列風格？A. 優雅正裝 B. 運動',a:'A'},
  {q:'蝶飛設計風格？A. 極簡優雅 B. 工具錶',a:'A'},
  {q:'Planet Ocean 表圈材質？A. 陶瓷 B. 皮革',a:'A'},
  {q:'計時圈類型？A. 測速圈 B. 潛水圈',a:'A'},
  {q:'海馬300 用途？A. 潛水復刻 B. 桌面錶',a:'A'},
  {q:'Globemaster 面盤特色？A. 鬆餅紋 B. 同心圓',a:'A'},
  {q:'Co-Axial 擒縱創始者？A. George Daniels B. Breguet',a:'A'},
  {q:'超霸 3861 與 1861 最大差異？A. 抗磁同軸化 B. 外觀',a:'A'},
  {q:'海馬60小時儲能？A. 否 B. 是',a:'B'},
  {q:'METAS 精準標準？A. 0/+5秒 B. -4/+6秒',a:'A'},
  {q:'COSC 精準標準？A. 0/+5秒 B. -4/+6秒',a:'B'},
  {q:'METAS 測試項目數？A. 3項 B. 8項',a:'B'},
  {q:'星座 Globemaster 認證？A. COSC B. METAS',a:'B'},
  {q:'蝶飛入門款有 METAS？A. 是 B. 否',a:'B'},
  {q:'超霸 3861 有 METAS？A. 否 B. 是',a:'B'},
  {q:'蝶飛適合場合？A. 潛水 B. 正裝',a:'B'},
  {q:'星座尺寸範圍？A. 40-50mm B. 25-41mm',a:'B'},
  {q:'海馬潛水功能？A. 測速圈 B. 排氦閥門',a:'B'},
  {q:'星座錶圈材質？A. 皮革 B. 陶瓷',a:'B'},
  {q:'蝶飛無日期強調？A. 防水 B. 純淨美學',a:'B'},
  {q:'超霸防水深度？A. 300米 B. 50米',a:'B'},
  {q:'海馬旋入式錶冠用於？A. 美觀 B. 防水',a:'B'},
  {q:'星座爪狀作用？A. 計時 B. 固定錶帶',a:'B'},
  {q:'Globemaster 錶圈樣式？A. 鋸齒式 B. 平滑圈',a:'A'},
  {q:'METAS 抗磁要求？A. 5000高斯 B. 15000高斯',a:'B'},
  {q:'Master Chronometer 為哪機構驗證？A. METAS B. COSC',a:'A'},
  {q:'蝶飛高端抗磁值？A. 5000高斯 B. 15000高斯',a:'B'},
  {q:'Globemaster 推出年份？A. 2015 B. 2010',a:'A'},
  {q:'星座 METAS 從哪年開始？A. 2010 B. 2015',a:'B'},
  {q:'星座小秒針機芯？A. 8900 B. 8800',a:'B'},
  {q:'星座適合年輕白領？A. 否 B. 是',a:'B'}
];

// === 狀態 ===
let pool = [], pointer = 0, batch = [], qIndex = 0, score = 0, totalRounds = 0, wrongLog = [];
const roundSize = 5;

// === UI ===
const qtext = document.getElementById('qtext'),
      qmeta = document.getElementById('qmeta'),
      feedback = document.getElementById('feedback'),
      scoreVal = document.getElementById('scoreVal'),
      progressBar = document.getElementById('progressBar'),
      remain = document.getElementById('remain'),
      totalRoundsEl = document.getElementById('totalRounds'),
      answerInput = document.getElementById('answerInput');

// === 工具 ===
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function resetPool(){pool=shuffle([...allQuestions]);pointer=0;remain.textContent=pool.length;}

// === 抽題 ===
function drawBatch(){
  batch=[];
  for(let i=0;i<roundSize;i++){
    if(pointer>=pool.length) resetPool();
    batch.push(pool[pointer++]);
  }
  remain.textContent=pool.length-pointer;
  qIndex=0;score=0;showQ();
}
function showQ(){
  const q=batch[qIndex];
  qtext.textContent=q.q;
  qmeta.textContent=`第 ${qIndex+1} 題（本輪 ${qIndex}/5）`;
  feedback.innerHTML='';
  answerInput.value='';
  answerInput.focus();
  progressBar.style.width=`${(qIndex/roundSize)*100}%`;
}

// === 提交 ===
function submit(){
  if(!batch.length)return;
  const ans=answerInput.value.trim().toUpperCase();
  if(!ans)return;
  const correct=batch[qIndex].a.toUpperCase();
  if(ans===correct){
    score++;
    feedback.innerHTML='<div class="ok">✅ 正確！</div>';
  }else{
    feedback.innerHTML=`<div class="bad">❌ 錯誤！正確答案：${correct}</div>`;
    wrongLog.push(batch[qIndex]);
  }
  setTimeout(()=>{
    qIndex++;
    if(qIndex<roundSize){
      showQ();
    }else{
      progressBar.style.width='100%';
      totalRounds++;
      totalRoundsEl.textContent=totalRounds;
      alert(`本輪 ${score}/5 已完成${score===5?' ✅ 全對！':'。'}`);
      drawBatch();
    }
    scoreVal.textContent=score;
  },600);
}

// === 下載錯題 ===
function downloadReport(){
  const now=new Date().toLocaleString('zh-TW');
  let txt=`歐米伽訓練報告 - ${now}\n總輪次:${totalRounds}\n\n錯題清單:\n`;
  if(!wrongLog.length)txt+='無錯題！完美！';
  else wrongLog.forEach((w,i)=>txt+=`${i+1}. ${w.q}\n正解:${w.a}\n\n`);
  const blob=new Blob([txt],{type:'text/plain;charset=utf-8'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;a.download='omega_report.txt';a.click();URL.revokeObjectURL(url);
}

// === 綁定 ===
document.getElementById('startBtn').onclick=()=>{drawBatch();};
document.getElementById('submitBtn').onclick=()=>{submit();};
answerInput.addEventListener('keypress',e=>{if(e.key==='Enter')submit();});
document.getElementById('reportBtn').onclick=()=>{downloadReport();};

// === 啟動 ===
resetPool();
</script>
</body>
</html>
